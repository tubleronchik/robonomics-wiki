{"hash":"16b6406ac2a554ee167914ed9d84874f98a2f1ea","data":{"doc":{"id":"7f292a15fb7420403a571bb7345f1419","title":"Sensors Connectivity","contributors":["Vourhey"],"translated":false,"headings":[],"subtitles":[{"depth":2,"value":"Sensor Connectivity Protocol :: v1","anchor":"#sensor-connectivity-protocol--v1"},{"depth":3,"value":"Sensor to Station","anchor":"#sensor-to-station"},{"depth":3,"value":"Station to Robonomics","anchor":"#station-to-robonomics"},{"depth":2,"value":"Stations and Feeders","anchor":"#stations-and-feeders"},{"depth":3,"value":"Station","anchor":"#station"},{"depth":3,"value":"Feeder","anchor":"#feeder"},{"depth":2,"value":"Connectivity Configuration","anchor":"#connectivity-configuration"}],"content":"\nThis Aira package allows you to read data from a SDS011 sensor and publish to different output channels. That said Aira is able to form a json formatted message with measurements and publish to a few channels. Also it includes Datalog feature which is still experimental. It could be used to publish data to Substrate based blockchain by Robonomics.\n\nThe last release is [Sensors Connectivity v0.2](https://github.com/airalab/sensors-connectivity/releases/tag/v0.2)\n\n## Sensor Connectivity Protocol :: v1\n\n### Sensor to Station\n\n**TCP Session diagram**\n\n| HEADER | DATA1 | DATA2 | DATA3 | ... | DATAN |\n|--------|-------|-------|-------|-----|-------|\n\nwhere `HEADER` is 34 bytes\n\n|      | Name      |\n|------|-----------|\n| 0x00 | public_id |\n| 0x20 | codec_id  |\n\n* `public_id` - Public identifier, generated on sensor setup.\n* `codec_id` - Type of used data codec.\n\n**Data frame**\n\n|      | Name      |\n|------|-----------|\n| 0x22 | payload   |\n| 0xNN | signature |\n\n\n* `payload` - Sensor measurements.\n* `signature` - Measurement Ed25519 signature, 64 bytes long. ([pynacl](https://github.com/pyca/pynacl))\n\nFor SDS011 sensor `payload` consists of 4 float numbers: PM2.5, PM10, GEO_LAT, GEO_LON\n\n### Station to Robonomics\n\nThe default output channel is Robonomics protocol over IPFS pubsub. For every measurement connectivity produces the following json formatted string:\n\n```\n{public_id: {\"model\": codec_id,\"timestamp\": unix_timestamp, \"measurement\": {\"pm25\": PM2.5, \"pm10\": PM10, \"geo\": \"GEO_LAT,GEO_LON\"}}}\n```\n\n## Stations and Feeders\n\nIn Sensors Connectivity there are two entities: station and feeder.\n\n### Station\n\nStation represents a source of data. The package can handle many inputs simultaneously:\n\n```\nstation1 \\                        / output1\nstation2 -  sensors-connectivity  - output2\nstation3 /                        \\ output3\n```\n\nThere are COM Station and TCP Station implemented. The first one reads data from a sensor that is connected to a serial port. TCP Station starts a tcp server and listens to incoming connections. \n\nTCP Station can accept data from every sensor or you can specify an access control list (ACL) for known sensors only.\n\n### Feeder\n\nFeeder is an output in terms of sensors connectivity:\n\n```\ninput1 \\                        / feeder1\ninput2 -  sensors-connectivity  - feeder2\ninput3 /                        \\ feeder3\n```\n\nAt current implementation the package can publish data to [Luftdaten](https://meine.luftdaten.info/), Robonomics or Robonomics on Substrate (using Datalog feature).\n\n## Connectivity Configuration\n\nThe package is highly configurable. The default configuration file looks like:\n\n```yaml\n# Please DO NOT edit this file\n# Make a copy instead, make changes and pass the absolute path to the copy in arguments\ngeneral:\n  publish_interval: 300 # time between two published messages\ncomstation:\n  port: \"/dev/ttyUSB0\"  # COM port of the device\n  work_period: 300      # time between two measurements in seconds\n  geo: \"\"               # Geo coordinates as latitude,longitude\n  public_key: \"\"        # If not provided, COMStation creates itself\ntcpstation:\n  address: \"\"           # IP and PORT to listen to, for example 0.0.0.0:31313\n  acl:                  # list of known addresses. If not specified accepts from everyone\n  # -\n  # -\nluftdaten:\n  enable: true          # whether or not publish to https://luftdaten.info/\nrobonomics:\n  enable: true          # enable use of Robonomics Network\n  ipfs_provider: \"\"     # ipfs endpoint\n  ipfs_topic: \"airalab.lighthouse.5.robonomics.eth\"\ndatalog:\n  enable: false         # enable use of Datalog Robonomics subcommand\n  path: \"\"              # path to Robonomics execution file\n  suri: \"\"              # private key of publisher account\n  remote: \"wss://substrate.ipci.io\"\n  dump_interval: 3600   # time between two transactions in seconds\n  temporal_username:    # set to pin files in Temporal.Cloud\n  temporal_password:\ndev:\n  sentry: \"\"\n```\n\nTo get familiar with all the options and launch scenarios check the [README.md](https://github.com/airalab/sensors-connectivity/tree/v0.2) out.\n\n"}},"context":{}}